"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var EnjoeiModal=function(){function n(t,e){_classCallCheck(this,n),this.title=t,this.text=e}return _createClass(n,[{key:"fire",value:function(){Swal.fire({title:this.title||"compra efetuada",text:this.text||"enviaremos informacoes por email",showCloseButton:!1,showCancelButton:!1,showConfirmButton:!1,width:"370px",customClass:{container:"enjoei-modal-container-class",popup:"enjoei-modal-popup-class",header:"enjoei-modal-header-class",title:"enjoei-modal-title-class",closeButton:"enjoei-modal-close-button-class",image:"enjoei-modal-image-class",content:"enjoei-modal-content-class",input:"enjoei-modal-input-class",actions:"enjoei-modal-actions-class",confirmButton:"enjoei-modal-confirm-button-class",cancelButton:"enjoei-modal-cancel-button-class",footer:"enjoei-modal-footer-class"}})}}]),n}(),ActionButtons=function(){function t(){_classCallCheck(this,t),this.confirmButton=document.getElementById("confirm-button"),this.cancelButton=document.getElementById("cancel-button"),this._bind_click_buttons()}return _createClass(t,[{key:"confirm",value:function(){new EnjoeiModal("compra confirmada","entraremos em contato po email").fire()}},{key:"cancel",value:function(){new EnjoeiModal("compra cancelada","pedido não foi enviado, você não sera cobrado").fire()}},{key:"_bind_click_buttons",value:function(){this.confirmButton.onclick=this.confirm,this.cancelButton.onclick=this.cancel}}]),t}(),PathParam=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"params",value:function(){for(var t=window.location.pathname.split("/").filter(function(t){return""!==t}),e={},n=0;n<t.length;n+=2)e[t[n]]=t[n+1];return e}}]),t}(),PrintHtmlPage=function(){function o(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,o),this.value=e,this.opts=n,this.element=document.querySelector("#".concat(t))}return _createClass(o,[{key:"show",value:function(){this.element.innerText=this._formatMoney(this.value),this.opts.accent&&this.element.classList.add("accent-text"),this.opts.bold&&this.element.classList.add("bold-text")}},{key:"_formatMoney",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:",",o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:".";try{e=Math.abs(e),e=isNaN(e)?2:e;var a=t<0?"-":"",i=parseInt(t=Math.abs(Number(t)||0).toFixed(e)).toString(),c=3<i.length?i.length%3:0;return"R$ ".concat(a+(c?i.substr(0,c)+o:"")+i.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+o)+(e?n+Math.abs(t-i).toFixed(e).slice(2):""))}catch(t){console.log(t)}}}]),o}(),LoadCheckoutPage=function(){function e(t){_classCallCheck(this,e),this.checkout_id=t,this.perform()}return _createClass(e,[{key:"perform",value:function(){fetch("/api/checkouts/".concat(this.checkout_id)).then(function(t){return t.json()}).then(function(t){var e={shippingPrice:t.checkout.shippingPrice,totalPrice:t.checkout.totalPrice,price:t.product.price,image:t.product.image};new PrintHtmlPage("amount-total",e.totalPrice,{accent:!0,bold:!0}).show(),new PrintHtmlPage("amount-shipping",e.shippingPrice).show(),new PrintHtmlPage("amount-original",e.price).show(),console.log(e)})}}]),e}();$(document).ready(function(){new LoadCheckoutPage(PathParam.params().checkout),new ActionButtons});